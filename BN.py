import os
import ccxt
import json

print("--- ๐ข ุจุฏุก ููุฏ ุงูุงุฎุชุจุงุฑ ุงููุจุงุดุฑ ---")

# ุฌูุจ ููุงุชูุญ API ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูุชู ูููุฑูุง PM2
api_key = os.getenv("BINANCE_API_KEY")
api_secret = os.getenv("BINANCE_API_SECRET")

# ุงูุชุญูู ุงููุจุฏุฆู ูู ูุฌูุฏ ุงูููุงุชูุญ
if not api_key or not api_secret:
    print("--- ๐ด ุฎุทุฃ ูุงุฏุญ: ููุงุชูุญ API ุบูุฑ ููุฌูุฏุฉ ูู ุจูุฆุฉ ุงูุชุดุบูู! ---")
    exit()

print("--- โ ุชู ุงูุนุซูุฑ ุนูู ููุงุชูุญ API. ุฌุงุฑู ูุญุงููุฉ ุงูุงุชุตุงู... ---")

try:
    # ุฅุนุฏุงุฏ ุงูุงุชุตุงู ุจุจุงููุงูุณ ุจุงุณุชุฎุฏุงู ููุชุจุฉ ccxt
    exchange = ccxt.binance({
        'apiKey': api_key,
        'secret': api_secret,
        'enableRateLimit': True,
    })

    # ุฌูุจ ุงูุฃุฑุตุฏุฉ
    balance = exchange.fetch_balance()

    print("\n--- ๐ ูุฌุญ ุงูุงุชุตุงู! ุฌุงุฑู ุนุฑุถ ุงูุฃุฑุตุฏุฉ ุงูุชู ููุง ูููุฉ ---")
    
    # ุทุจุงุนุฉ ุงูุฃุฑุตุฏุฉ ุงูุชู ูููุชูุง ุฃูุจุฑ ูู ุตูุฑ ููุท
    for currency, data in balance['total'].items():
        if data > 0:
            print(f"- {currency}: {data}")

except ccxt.AuthenticationError:
    print("\n--- ๐ด ุฎุทุฃ ูู ุงููุตุงุฏูุฉ (AuthenticationError)! ---")
    print("   - ุชุฃูุฏ ูู ุตุญุฉ ููุงุชูุญ API.")
    print("   - ุชุฃูุฏ ูู ุฃู ุตูุงุญูุงุช ุงูููุชุงุญ ุนูู ูููุน ุจุงููุงูุณ ุชุณูุญ ุจุงููุฑุงุกุฉ.")
    print("   - ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ูููุฏ IP ุชููุน ุงูุฎุงุฏู.")

except Exception as e:
    print(f"\n--- ๐ด ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน: {e} ---")

print("\n--- ๋ ุงูุชูุงุก ููุฏ ุงูุงุฎุชุจุงุฑ ๋ ---")
